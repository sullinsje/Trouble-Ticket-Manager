@using Trouble_Ticket_Manager.Models.ViewModels
@model TicketViewModel

@{
    ViewData["Title"] = "Create";
}

<h1>Create</h1>

<h4>Ticket</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-controller="TicketAPI" asp-action="Create" id="createForm">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <input type="hidden" asp-for="SubmittedAt" value="@DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ssZ")" />

            <div class="form-group form-check">
                <label class="form-check-label">
                    <input type="checkbox" id="create-new-user-checkbox" class="form-check-input" />
                    Create New Contact?
                </label>
            </div>

            <div class="form-group" id="new-contact-name-group" style="display:none;">
                <p class="mt-2 text-info">Enter New Contact Details:</p>

                <div class="form-group">
                    <label asp-for="NewContactName" class="control-label">Contact Name</label>
                    <input asp-for="NewContactName" class="form-control" />
                    <span asp-validation-for="NewContactName" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NewContactEmail" class="control-label">Contact Email</label>
                    <input asp-for="NewContactEmail" class="form-control" />
                    <span asp-validation-for="NewContactEmail" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NewContactBuilding" class="control-label">Contact Building</label>
                    <input asp-for="NewContactBuilding" class="form-control" />
                    <span asp-validation-for="NewContactBuilding" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NewContactRoom" class="control-label">Contact Room</label>
                    <input asp-for="NewContactRoom" class="form-control" />
                    <span asp-validation-for="NewContactRoom" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group" id="existing-contact-group">
                <label asp-for="SelectedContactId" class="control-label">Contact</label>
                <select asp-for="SelectedContactId" class="form-control" id="contact-name-dropdown">
                    <option value="0">-- Loading Contacts --</option>
                </select>
                <span asp-validation-for="SelectedContactId" class="text-danger"></span>
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input type="checkbox" id="create-new-computer-checkbox" class="form-check-input" />
                    Create New Computer?
                </label>
            </div>

            <div id="new-computer-details-group" style="display:none;">
                <p class="mt-2 text-info">Enter New Computer Details:</p>

                <div class="form-group">
                    <label asp-for="NewAssetTag" class="control-label">Asset Tag</label>
                    <input asp-for="NewAssetTag" class="form-control" />
                    <span asp-validation-for="NewAssetTag" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NewComputerServiceTag" class="control-label">Service Tag</label>
                    <input asp-for="NewComputerServiceTag" class="form-control" />
                    <span asp-validation-for="NewComputerServiceTag" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NewComputerModel" class="control-label">Model</label>
                    <input asp-for="NewComputerModel" class="form-control" />
                    <span asp-validation-for="NewComputerModel" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group" id="existing-computer-group">
                <label class="control-label">Select Existing Computers</label>

                <div id="asset-tag-checkbox-list" class="border p-3" style="max-height: 200px; overflow-y: auto;">
                    <p class="text-muted mb-0">No computers loaded.</p>
                </div>

                <input type="hidden" name="SelectedAssetTags" value="" />

                <span asp-validation-for="SelectedAssetTags" class="text-danger"></span>
            </div>


            <div class="form-group">
                <label asp-for="IssueDescription" class="control-label">Issue Description</label>
                <input asp-for="IssueDescription" class="form-control" />
                <span asp-validation-for="IssueDescription" class="text-danger"></span>
            </div>
            <div class="form-group form-check">
                <label asp-for="IsResolved" class="form-check-label">Resolved?</label>
                <input asp-for="IsResolved" class="form-check-input" />
                <span asp-validation-for="IsResolved" class="text-danger"></span>
            </div>
            <div class="form-group form-check">
                <label asp-for="ChargerGiven" class="form-check-label">Charger Provided?</label>
                <input asp-for="ChargerGiven" class="form-check-input" />
                <span asp-validation-for="ChargerGiven" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts {
    <script type="module" src="~/js/ticketCreate.js"></script>
}